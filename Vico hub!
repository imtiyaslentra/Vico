-- Memastikan Orion Library sudah ter-load
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()

-- Membuat Window baru
local Window = OrionLib:MakeWindow({Name = "OrionLibrary", HidePremium = true})

-- Membuat Tab untuk AutoSpam dan AutoParry
local Tab = Window:MakeTab({
    Name = "Features",
    Icon = "rbxassetid://4483345998", -- Ganti dengan ID ikon yang diinginkan
    Premium = false
})

-- Variabel untuk mengontrol fitur
getgenv().AutoDetectSpam = false
getgenv().Paws = {AutoParry = false}

-- Toggle untuk AutoSpam
local AutoSpamToggle = Tab:AddToggle({
    Name = "AutoSpam",
    Default = false,
    Callback = function(Value)
        getgenv().AutoDetectSpam = Value
        if Value then
            print("AutoSpam diaktifkan")
            StartAutoSpam()
        else
            print("AutoSpam dinonaktifkan")
            getgenv().SpamClickA = false
        end
    end
})

-- Toggle untuk AutoParry
local AutoParryToggle = Tab:AddToggle({
    Name = "AutoParry",
    Default = false,
    Callback = function(Value)
        getgenv().Paws.AutoParry = Value
        if Value then
            print("AutoParry diaktifkan")
            StartAutoParry()
        else
            print("AutoParry dinonaktifkan")
        end
    end
})

-- Menambahkan label untuk status
Tab:AddLabel("Toggle fitur di atas untuk mengaktifkan atau menonaktifkan.")

-- Fungsi untuk AutoSpam
local function StartAutoSpam()
    local Alive = workspace:WaitForChild("Alive", 9e9)
    local Players = game:GetService("Players")
    local Player = Players.LocalPlayer
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Remotes = ReplicatedStorage:WaitForChild("Remotes", 9e9)
    local ParryAttempt = Remotes:WaitForChild("ParryAttempt", 9e9)
    local Balls = workspace:WaitForChild("Balls", 9e9)

    local function get_ProxyPlayer()
        local Distance = math.huge
        local plrRP = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
        local PlayerReturn = nil
        
        for _, plr1 in pairs(Alive:GetChildren()) do
            if plr1:FindFirstChild("Humanoid") and plr1.Humanoid.Health > 50 then
                if plr1.Name ~= Player.Name and plrRP and plr1:FindFirstChild("HumanoidRootPart") then
                    local magnitude = (plr1.HumanoidRootPart.Position - plrRP.Position).Magnitude
                    if magnitude <= Distance then
                        Distance = magnitude
                        PlayerReturn = plr1
                    end
                end
            end
        end
        return PlayerReturn
    end

    local function SuperClick()
        task.spawn(function()
            if Player.Character and Player.Character:FindFirstChild("Humanoid") and Player.Character.Humanoid.Health > 0 then
                local args1 = 0.5
                local args2 = CFrame.new()
                local args3 = {["enzo"] = Vector3.new()}
                local args4 = {500, 500}
                
                if args1 and args2 and args3 and args4 then
                    ParryAttempt:FireServer(args1, args2, args3, args4)
                end
            end
        end)
    end

    task.spawn(function()
        while task.wait() do
            if getgenv().AutoDetectSpam then
                SuperClick()
            end
        end
    end)
end

-- Fungsi untuk AutoParry
local function StartAutoParry()
    getgenv().Paws = {
        ["AutoParry"] = true,
        ["PingBased"] = true,
        ["PingBasedOffset"] = 0,
        ["DistanceToParry"] = 0.5,
        ["BallSpeedCheck"] = true,
    }

    local Players = game:GetService("Players")
    local Player = Players.LocalPlayer
    local ReplicatedPaw = game:GetService("ReplicatedStorage")
    local Paws = ReplicatedPaw:WaitForChild("Remotes", 9e9)
    local PawsBalls = workspace:WaitForChild("Balls", 9e9)

    local function IsTheTarget()
        return Player.Character:FindFirstChild("Highlight") ~= nil
    end

    local function FindBall()
        for _, v in pairs(PawsBalls:GetChildren()) do
            if v:GetAttribute("realBall") == true then
                return v
            end
        end
        return nil
    end

    game:GetService("RunService").PreRender:Connect(function()
        local Ball = FindBall()
        if not Ball then return end

        local BallPosition = Ball.Position
        local BallVelocity = Ball.AssemblyLinearVelocity.Magnitude
        local Distance = Player:DistanceFromCharacter(BallPosition)

        local Ping = game.Stats.Network.ServerStatsItem["Data Ping"]:GetValue() / 1000

        if getgenv().Paws.PingBased then
            Distance = Ping + getgenv().Paws.PingBasedOffset
        end

        if getgenv().Paws.BallSpeedCheck and BallVelocity == 0 then return end

        if (Distance < BallVelocity) and IsTheTarget() and getgenv().Paws.AutoParry then
            Paws:WaitForChild("ParryButtonPress"):Fire()
        end
    end)
end

-- Menampilkan GUI
OrionLib:Init()
